{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5 text-center">
    <h2 class="mb-4">Secure Payment</h2>
    <p>Please review your order total below and complete payment securely using Square.</p>

    <!-- Order Summary -->
    <div class="card mx-auto my-4" style="max-width: 400px;">
        <div class="card-body">
            <h5 class="card-title">Order #{{ order.id }}</h5>
            <p class="card-text">Total: <strong>£{{ order.total }}</strong></p>
        </div>
    </div>

    <!-- Square Config -->
    <div id="square-config"
         data-app-id="{{ SQUARE_APPLICATION_ID }}"
         data-location-id="{{ SQUARE_LOCATION_ID }}">
    </div>

    <!-- Square Card Form -->
    <div id="card-container" class="my-3"></div>

    <!-- Amount + Pay Button -->
    <input type="hidden" id="amount" value="{{ order.total }}">
    <button id="pay-button" class="btn btn-primary">Pay £{{ order.total }}</button>

    <p id="status" class="mt-3 status-msg"></p>
</div>

<!-- Include Square SDK and your JS -->
<script src="https://sandbox.web.squarecdn.com/v1/square.js"></script>
<script src="{% static 'js/square-checkout.js' %}"></script>
{% endblock %}
